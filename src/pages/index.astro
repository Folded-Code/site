---
import { getCollection } from 'astro:content'
import Card from '../components/Card.astro'
import Blogdash from '../components/PostsDisplay.astro'
import Section from '../components/Section.astro'
import Layout from '../layouts/Layout.astro'

const city = import.meta.env.PROD
  ? (await (await fetch('https://nomadlist.com/@thomasforbes.json')).json())
      .location.now.city
  : 'Somewhere'

const posts = (await getCollection('blog'))
  .sort((a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf())
  .slice(0, 5)
---

<Layout title="Thomas Forbes">
  <!-- MAIN -->
  <Section>
    <h1
      class="rainbow-text cursor-pointer text-center text-7xl font-bold duration-300 hover:rotate-1 hover:scale-[1.03] md:text-8xl"
      id="thomasforbes"
    >
      Thomas Forbes
    </h1>
    <p class="font-sans text-xl font-semibold text-slate-100 sm:text-2xl">
      ‚öíÔ∏è Building quality things <i>fast</i> üí®
    </p>
    <div class="flex flex-col gap-8 md:flex-row">
      <!-- BULLETS -->
      <Card class="flex-shrink-0 !bg-sky-950/60">
        <ul class="grid h-full grid-cols-2 gap-2 sm:grid-cols-4 md:grid-cols-1">
          {
            [
              { emoji: 'üáÆüá™üá∫üá∏', text: 'Citizen' },
              { emoji: 'üåç', text: city || 'Somewhere' },
              { emoji: 'üíª', text: 'Developer' },
              {
                emoji: 'üóìÔ∏è',
                text: `${Math.abs(
                  new Date(
                    Date.now() - new Date(2005, 8, 10).getTime()
                  ).getUTCFullYear() - 1970
                )} years old`,
              },
            ].map((item) => (
              <li class="flex items-center space-x-2 text-left font-sans-serif text-base font-semibold sm:text-lg md:text-xl">
                <span class="inline-block w-8 text-center sm:w-auto md:w-12">
                  {item.emoji}
                </span>
                <span>{item.text}</span>
              </li>
            ))
          }
        </ul>
      </Card>
      <!-- TEXT -->
      <Card
        class="space-y-6 !bg-indigo-950/60 text-justify text-base [&>p>b]:text-slate-100 [&>p]:text-gray-300"
      >
        <p>
          My <b>favourite feeling</b> is coming home on the train after <i
            >squeezing all the productivity out of my brain</i
          > and being able to point to a thing and say <b>"I made that"</b>.
        </p>
        <!-- <p>
          I can't bare to give a user a suboptimal experience but also
          understand the <a
            target="_blank"
            href="https://www.investopedia.com/terms/l/lawofdiminishingmarginalreturn.asp"
            >law of diminishing marginal returns</a
          >.
        </p> -->
        <p>
          I know I don't have all the experience or knowledge but I <b
            >learn fast</b
          > and have a need for speed to <b>get things done</b>.
        </p>
      </Card>
    </div>
  </Section>
  <!-- WRITING -->
  <Section class="w-full">
    <Blogdash title="Latest Writing" posts={posts} />
  </Section>
</Layout>

<style>
  .rainbow-text {
    @apply !bg-clip-text text-transparent;
    background: linear-gradient(
      238deg,
      theme('colors.sky.600') 0%,
      theme('colors.indigo.500') 17%,
      theme('colors.rose.500') 33%,
      theme('colors.indigo.500') 50%,
      theme('colors.sky.600') 66%,
      theme('colors.indigo.500') 83%,
      theme('colors.rose.500') 100%
    );
    background-size: 600%;
    animation: rainbow-text-animation 6s ease infinite;
  }

  @keyframes rainbow-text-animation {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }
</style>

<script>
  const h1 = document.getElementById('thomasforbes')!

  h1.onclick = () => {
    const audio = new Audio('/assets/sounds/pop.m4a')
    h1.classList.toggle('hover:rotate-1')
    h1.classList.toggle('hover:-rotate-1')

    audio.volume = 0.1
    audio.play()
  }
</script>
